[gd_scene load_steps=20 format=3 uid="uid://04m5y8xj8xtj"]

[ext_resource type="Texture2D" uid="uid://cgpxe22ilri4d" path="res://Assets/bubble.png" id="1_2m6f8"]
[ext_resource type="Texture2D" uid="uid://b4kcugk52b1tn" path="res://Assets/air.png" id="1_duac7"]
[ext_resource type="Script" path="res://Air.gd" id="1_vih7h"]
[ext_resource type="Script" path="res://PushBubble.gd" id="3_1jbyb"]
[ext_resource type="Texture2D" uid="uid://cvia81dmv2dfs" path="res://Assets/TileMap/cobble.png" id="6_36pl0"]
[ext_resource type="Texture2D" uid="uid://dd6lwlx6tk7uv" path="res://Assets/cloud.png" id="6_khqjb"]
[ext_resource type="Script" path="res://Bubble.gd" id="7_3uix7"]
[ext_resource type="Texture2D" uid="uid://cfn31mr0iecr" path="res://Assets/TileMap/grass-and-dirt.png" id="7_bp6dm"]
[ext_resource type="Texture2D" uid="uid://jhl5rqwqoo6x" path="res://Assets/bubble_popped-Sheet.png" id="8_1usly"]
[ext_resource type="Texture2D" uid="uid://rssvirw4y8om" path="res://Assets/spike.png" id="8_tvyur"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_01r3q"]
texture = ExtResource("6_36pl0")
texture_region_size = Vector2i(64, 64)
0:0/0 = 0
0:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:0/0/physics_layer_0/angular_velocity = 0.0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_vtd6k"]
texture = ExtResource("7_bp6dm")
texture_region_size = Vector2i(64, 64)
0:0/0 = 0
0:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:0/0/physics_layer_0/angular_velocity = 0.0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)

[sub_resource type="TileSet" id="TileSet_snb6r"]
tile_size = Vector2i(64, 64)
physics_layer_0/collision_layer = 1
sources/0 = SubResource("TileSetAtlasSource_01r3q")
sources/1 = SubResource("TileSetAtlasSource_vtd6k")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_af6eu"]
particle_flag_disable_z = true
angle_min = -291.2
angle_max = 194.2
direction = Vector3(100, 0, 0)
flatness = 0.382
initial_velocity_min = 1000.0
initial_velocity_max = 1000.0
gravity = Vector3(0, 0, 0)
scale_min = 0.1
scale_max = 0.3
color = Color(0.717647, 0.996078, 0.976471, 0.329412)

[sub_resource type="AtlasTexture" id="AtlasTexture_lwfvb"]
atlas = ExtResource("8_1usly")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_y6fll"]
atlas = ExtResource("8_1usly")
region = Rect2(64, 0, 64, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_esfns"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_lwfvb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_y6fll")
}],
"loop": false,
"name": &"Pop",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("1_2m6f8")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_lsy11"]
radius = 32.0156

[sub_resource type="CircleShape2D" id="CircleShape2D_buygo"]
radius = 30.1496

[node name="TestEnvironment" type="Node2D"]

[node name="TileMap" type="TileMap" parent="."]
tile_set = SubResource("TileSet_snb6r")
format = 2
layer_0/tile_data = PackedInt32Array(-327689, 0, 0, -262153, 0, 0, -196617, 0, 0, -131081, 0, 0, -65545, 0, 0, -9, 0, 0, 65527, 0, 0, 131063, 0, 0, 196599, 0, 0, 262135, 0, 0, 327671, 0, 0, 393207, 0, 0, 458743, 0, 0, 524279, 0, 0, 589815, 0, 0, 589816, 0, 0, 655352, 0, 0, 655353, 0, 0, 655354, 0, 0, 655355, 0, 0, 655356, 0, 0, 655357, 0, 0, 655358, 0, 0, 655359, 0, 0, 589824, 0, 0, 589825, 0, 0, 655361, 0, 0, 655362, 0, 0, 655363, 0, 0, 589828, 0, 0, 589829, 0, 0, 589830, 0, 0, 589831, 0, 0, 589832, 0, 0, 589833, 0, 0, 589834, 0, 0, 589835, 0, 0, 655371, 0, 0, 655372, 0, 0, 655373, 0, 0, 655374, 0, 0, 655375, 0, 0, 655376, 0, 0, 589840, 0, 0, 589841, 0, 0, 524305, 0, 0, 524306, 0, 0, 458770, 0, 0, 393234, 0, 0, 393235, 0, 0, 327699, 0, 0, 262163, 0, 0, 196628, 0, 0, 131092, 0, 0, 65556, 0, 0, -131053, 0, 0, -196589, 0, 0, -196590, 0, 0, -262126, 0, 0, -262127, 0, 0, -327663, 0, 0, -327664, 0, 0, -393200, 0, 0, -393201, 0, 0, -458738, 0, 0, -458739, 0, 0, -458740, 0, 0, -458741, 0, 0, -458742, 0, 0, -458743, 0, 0, -524280, 0, 0, -524281, 0, 0, -524282, 0, 0, -524283, 0, 0, -524284, 0, 0, -524285, 0, 0, -524286, 0, 0, -524287, 0, 0, -524288, 0, 0, -458753, 0, 0, -458754, 0, 0, -458755, 0, 0, -458756, 0, 0, -458757, 0, 0, -458758, 0, 0, -393223, 0, 0, -393224, 0, 0, -327688, 0, 0, 458748, 0, 0, 458749, 0, 0, 458750, 0, 0, 458751, 0, 0, 393216, 0, 0, 393217, 0, 0, 393218, 0, 0, 393219, 0, 0, 393220, 0, 0, 393221, 0, 0, 393222, 0, 0, 393223, 0, 0, 327687, 0, 0, 327688, 0, 0, 327689, 0, 0, 327690, 0, 0, 327691, 0, 0, 262155, 0, 0, 262156, 0, 0, 262157, 0, 0, 262158, 0, 0, 196622, 0, 0, 196623, 0, 0, 131087, 0, 0, 65551, 0, 0, 65550, 0, 0, 14, 0, 0, 13, 0, 0, -65523, 0, 0, -65524, 0, 0, -131060, 0, 0, -131061, 0, 0, -196597, 0, 0, -196598, 0, 0, -196599, 0, 0, -262135, 0, 0, -262136, 0, 0, -262137, 0, 0, -262138, 0, 0, -262139, 0, 0, -262140, 0, 0, -327677, 0, 0, -327678, 0, 0, -327679, 0, 0, -327680, 0, 0, -262145, 0, 0, -262146, 0, 0, -262147, 0, 0, -262148, 0, 0, -196612, 0, 0, -196613, 0, 0, -131077, 0, 0, -65542, 0, 0, -65543, 0, 0, -7, 0, 0, -8, 0, 0, 65528, 0, 0, 131064, 0, 0, 196600, 0, 0, 262136, 0, 0, 327672, 0, 0, 327673, 0, 0, 393209, 0, 0, 393210, 0, 0, 458746, 0, 0, 458747, 0, 0, 196616, 1, 0, -65516, 0, 0, 20, 0, 0)

[node name="Air" type="Node2D" parent="."]
position = Vector2(66, -33)
script = ExtResource("1_vih7h")

[node name="Sprite2D" type="Sprite2D" parent="Air"]
texture_filter = 1
texture = ExtResource("1_duac7")

[node name="PushBubble" type="RayCast2D" parent="Air"]
position = Vector2(32, 0)
target_position = Vector2(125, 0)
script = ExtResource("3_1jbyb")

[node name="GPUParticles2D" type="GPUParticles2D" parent="Air"]
position = Vector2(32, 0)
emitting = false
amount = 46
process_material = SubResource("ParticleProcessMaterial_af6eu")
texture = ExtResource("6_khqjb")
lifetime = 0.08

[node name="Bubble" type="Node2D" parent="."]
position = Vector2(121, 53)
script = ExtResource("7_3uix7")
metadata/_edit_group_ = true

[node name="BubbleRigid" type="RigidBody2D" parent="Bubble"]
gravity_scale = 0.0

[node name="Camera2D" type="Camera2D" parent="Bubble/BubbleRigid"]
zoom = Vector2(1.15, 1.15)

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="Bubble/BubbleRigid"]
texture_filter = 1
sprite_frames = SubResource("SpriteFrames_esfns")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Bubble/BubbleRigid"]
shape = SubResource("CircleShape2D_lsy11")

[node name="Spikes" type="Node2D" parent="."]

[node name="Spike" type="Node2D" parent="Spikes"]
position = Vector2(548, 12)
metadata/_edit_group_ = true

[node name="Sprite2D" type="Sprite2D" parent="Spikes/Spike"]
texture_filter = 1
texture = ExtResource("8_tvyur")

[node name="Area2D" type="Area2D" parent="Spikes/Spike"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Spikes/Spike/Area2D"]
shape = SubResource("CircleShape2D_buygo")

[connection signal="body_entered" from="Spikes/Spike/Area2D" to="Bubble" method="_on_area_2d_body_entered"]
